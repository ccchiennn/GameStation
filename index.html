<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŠæˆ²å»³</title>
    <style>
        :root {
            --primary: #00f2fe;
            --secondary: #4facfe;
            --accent: #f9d423;
            --danger: #ff416c;
            --success: #00ff88;
            --bg: #070a13;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', 'PingFang TC', 'Microsoft JhengHei', sans-serif;
            background: var(--bg);
            color: white;
            margin: 0;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- Welcome Screen ä¸»ç•«é¢ --- */
        #welcome-screen {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            text-align: center;
        }

        .welcome-title { margin: 0; line-height: 1.2; }
        .welcome-title span {
            display: block;
            font-size: 5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 12px;
        }
        .title-top { color: var(--primary); text-shadow: 0 0 20px var(--primary); }
        .title-mid { 
            background: linear-gradient(to right, #ff00de, var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 5.5rem !important;
        }
        .title-bot { color: var(--secondary); text-shadow: 0 0 20px var(--secondary); }

        .start-btn {
            margin-top: 60px;
            background: linear-gradient(45deg, var(--secondary), var(--primary));
            border: none;
            padding: 22px 70px;
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            border-radius: 100px;
            cursor: pointer;
            box-shadow: 0 0 35px rgba(0, 242, 254, 0.4);
            transition: 0.4s;
        }
        .start-btn:hover { transform: scale(1.1); box-shadow: 0 0 60px rgba(0, 242, 254, 0.8); }

        /* --- Header & Nav --- */
        header {
            width: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(15px);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: none;
        }

        .nav-container {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .coin-box {
            font-size: 1.6rem;
            color: var(--accent);
            font-weight: 800;
            background: rgba(0,0,0,0.5);
            padding: 8px 25px;
            border-radius: 50px;
            border: 1px solid var(--accent);
        }

        .nav-link {
            background: transparent; border: none;
            color: #64748b; font-size: 1.2rem; font-weight: bold;
            cursor: pointer; padding: 10px 20px; transition: 0.3s;
        }
        .nav-link.active { color: var(--primary); border-bottom: 3px solid var(--primary); text-shadow: 0 0 10px var(--primary); }

        /* --- Game Sections --- */
        .game-main { width: 95%; max-width: 1000px; margin: 40px 0; display: none; }
        .game-card {
            display: none; background: #111827; border-radius: 40px; padding: 50px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.05);
        }
        .game-card.active { display: block; animation: fadeInUp 0.6s ease forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }

        /* --- åæ‡‰åŠ›ï¼šåˆ†ç´šæ–‡å­—å„ªåŒ– --- */
        #react-area {
            width: 100%; height: 450px; background: #1f2937; border-radius: 30px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; border: 4px solid #374151; transition: 0.1s;
        }
        #react-label { font-size: 6rem; font-weight: 900; margin: 0; letter-spacing: 5px; }
        #react-rank { font-size: 2.5rem; color: var(--accent); margin-top: 30px; font-weight: bold; text-shadow: 0 0 15px rgba(249,212,35,0.5); }

        /* --- è³½é¦¬ï¼šè¦–è¦ºå¢å¼· --- */
        .race-lane {
            height: 110px; border-bottom: 2px dashed #374151; position: relative;
            display: flex; align-items: center; background: rgba(255,255,255,0.02);
        }
        .horse { font-size: 4.5rem; position: absolute; left: 0; transition: left 0.1s linear; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5)); }
        .running { animation: jump 0.35s infinite; }
        @keyframes jump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px) rotate(5deg); } }

        /* --- ç æ°´æœï¼šæ…¢é€Ÿå„ªåŒ– --- */
        #fruit-canvas { background: radial-gradient(circle, #1e293b, #000); border-radius: 30px; width: 100%; height: 500px; cursor: crosshair; }

        /* --- æ“²éª°å­ï¼šæ¯”å¤§å° --- */
        .dice-container { display: flex; justify-content: center; gap: 50px; margin: 40px 0; }
        .dice-box { text-align: center; }
        .dice {
            width: 120px; height: 120px; background: white; color: black;
            border-radius: 20px; display: flex; justify-content: center; align-items: center;
            font-size: 4rem; font-weight: bold; box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border: 4px solid #ddd;
        }
        .dice-label { margin-top: 15px; font-size: 1.5rem; color: var(--secondary); font-weight: bold; }
        #dice-result-msg { font-size: 2.5rem; font-weight: 900; min-height: 4rem; }
    </style>
</head>
<body>

    <div id="welcome-screen">
        <h1 class="welcome-title">
            <span class="title-top">Welcome</span>
            <span class="title-mid">To Game</span>
            <span class="title-bot">Station</span>
        </h1>
        <button class="start-btn" onclick="initGame()">START GAME</button>
    </div>

    <header id="header">
        <div class="nav-container">
            <div class="nav-links">
                <button class="nav-link active" onclick="switchGame('react', this)">åæ‡‰æŒ‘æˆ°</button>
                <button class="nav-link" onclick="switchGame('race', this)">çš‡å®¶è³½é¦¬</button>
                <button class="nav-link" onclick="switchGame('fruit', this)">å¿è€…ç æœ</button>
                <button class="nav-link" onclick="switchGame('dice', this)">éª°å­å¤§è³½</button>
            </div>
            <div class="coin-box">ğŸ’° <span id="global-coins">0</span></div>
        </div>
    </header>

    <div class="game-main" id="game-main">
        <div id="react" class="game-card active">
            <h2 style="text-align:center; font-size: 2rem;">ç¥ç¶“åæ‡‰æ¸¬è©¦</h2>
            <div id="react-area" onclick="handleReact()">
                <p id="react-label">READY?</p>
                <p id="react-rank"></p>
            </div>
            <p style="text-align:center; font-size: 1.2rem; margin-top:30px; color:#94a3b8;">æœ€ä½³ç´€éŒ„: <span id="best-react">--</span> ms</p>
        </div>

        <div id="race" class="game-card">
            <h2 style="text-align:center; font-size: 2rem;">çš‡å®¶å¤§è³½é¦¬ (å¤§ç•«é¢)</h2>
            <div style="text-align:center; margin-bottom:30px;">
                ä¸‹æ³¨: <input type="number" id="bet-amt" value="100" style="width:100px; padding:12px; border-radius:15px; background:#1f2937; color:white; border:1px solid #374151;">
                é¸æ“‡é¦¬åŒ¹: 
                <select id="horse-sel" style="padding:12px; border-radius:15px; background:#1f2937; color:white; border:1px solid #374151;">
                    <option value="0">ğŸ 1è™Ÿï¼šé–ƒé›»</option>
                    <option value="1">ğŸ¦„ 2è™Ÿï¼šå¹»å½±</option>
                    <option value="2">ğŸ¦“ 3è™Ÿï¼šæ–‘é¦¬</option>
                </select>
                <button onclick="playRace()" class="start-btn" style="padding:12px 35px; font-size:1.2rem; margin:0 0 0 15px;">é–‹è³½ï¼</button>
            </div>
            <div class="race-lane"><div class="horse" id="horse0">ğŸ</div></div>
            <div class="race-lane"><div class="horse" id="horse1">ğŸ¦„</div></div>
            <div class="race-lane"><div class="horse" id="horse2">ğŸ¦“</div></div>
        </div>

        <div id="fruit" class="game-card">
            <h2 style="text-align:center; font-size: 2rem;">å¿è€…ç æ°´æœ (æ…¢é€Ÿé«”é©—ç‰ˆ)</h2>
            <div style="display:flex; justify-content:space-between; margin-bottom:15px; font-size:1.3rem;">
                <span id="fruit-score">å¾—åˆ†: 0</span>
                <span id="fruit-timer">å€’æ•¸: 30s</span>
            </div>
            <canvas id="fruit-canvas"></canvas>
            <div id="fruit-ui" style="text-align:center; margin-top:20px;">
                <button onclick="startFruit()" class="start-btn" style="padding:15px 50px;">é»æ“Šé–‹å§‹</button>
            </div>
        </div>

        <div id="dice" class="game-card">
            <h2 style="text-align:center; font-size: 2rem;">æ“²éª°å¤§è³½ (å…¬æ­£éš¨æ©Ÿ)</h2>
            <p style="text-align:center; color:#94a3b8;">å‹è€…ç²å¾—å…©å€çé‡‘ï¼Œå¹³æ‰‹é€€å›é‡‘å¹£ã€‚</p>
            <div style="text-align:center;">ä¸‹æ³¨: <input type="number" id="dice-bet" value="200" style="width:100px; padding:10px; border-radius:10px;"></div>
            <div class="dice-container">
                <div class="dice-box"><div class="dice" id="user-dice">?</div><div class="dice-label">ä½  (PLAYER)</div></div>
                <div class="dice-box"><div class="dice" id="cpu-dice">?</div><div class="dice-label">é›»è…¦ (CPU)</div></div>
            </div>
            <div id="dice-result-msg" style="text-align:center; color:var(--accent);"></div>
            <button onclick="playDice()" class="start-btn" style="width:100%; margin-top:20px;">æ“²éª°å­ï¼</button>
        </div>
    </div>

<script>
    let coins = parseInt(localStorage.getItem('gc_coins')) || 1000;
    let best = localStorage.getItem('gc_best') || '--';

    function sync() {
        document.getElementById('global-coins').innerText = coins;
        document.getElementById('best-react').innerText = best;
        localStorage.setItem('gc_coins', coins);
        localStorage.setItem('gc_best', best);
    }

    function initGame() {
        document.getElementById('welcome-screen').style.display = 'none';
        document.getElementById('header').style.display = 'block';
        document.getElementById('game-main').style.display = 'block';
        sync();
    }

    function switchGame(id, btn) {
        document.querySelectorAll('.game-card').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        btn.classList.add('active');
    }

    // --- 1. åæ‡‰åŠ›æŒ‘æˆ° ---
    let rs = 'idle', rt, rsTime;
    function handleReact() {
        const p = document.getElementById('react-area'), l = document.getElementById('react-label'), r = document.getElementById('react-rank');
        if (rs === 'idle') {
            rs = 'wait'; p.style.background = '#eab308'; l.innerText = 'WAIT...'; r.innerText = '';
            rt = setTimeout(() => {
                rs = 'go'; p.style.background = '#22c55e'; l.innerText = 'GO!!'; rsTime = Date.now();
            }, Math.random() * 3000 + 2000);
        } else if (rs === 'wait') {
            clearTimeout(rt); rs = 'idle'; p.style.background = '#ef4444'; l.innerText = 'TOO EARLY!';
        } else if (rs === 'go') {
            let d = Date.now() - rsTime; rs = 'idle'; p.style.background = '#1f2937'; l.innerText = d + 'ms';
            let title = '';
            if (d < 180) { title = 'âš¡ ç¥ä¹‹åæ‡‰ âš¡'; coins += 100; }
            else if (d < 300) { title = 'ğŸƒ å‡¡äºº'; coins += 50; }
            else if (d < 500) { title = 'ğŸš¶ é²ç·©'; coins += 10; }
            else if (d < 800) { title = 'ğŸ¢ æ¨¹æ‡¶'; coins += 2; }
            else { title = 'ğŸ—¿ æ²’åœ¨å‹•å§?'; }
            r.innerText = title;
            if (best === '--' || d < best) best = d;
            sync();
        }
    }

    // --- 2. çš‡å®¶è³½é¦¬ ---
    let racing = false;
    function playRace() {
        const bet = parseInt(document.getElementById('bet-amt').value);
        if (racing || coins < bet) return alert("é‡‘å¹£ä¸è¶³æˆ–æ¯”è³½é€²è¡Œä¸­ï¼");
        coins -= bet; sync(); racing = true;
        let pos = [0,0,0], els = [document.getElementById('horse0'), document.getElementById('horse1'), document.getElementById('horse2')];
        els.forEach(h => h.classList.add('running'));
        let intr = setInterval(() => {
            for(let i=0; i<3; i++) {
                pos[i] += Math.random() * 4;
                els[i].style.left = pos[i] + '%';
                if (pos[i] >= 92) {
                    clearInterval(intr); racing = false;
                    els.forEach(h => h.classList.remove('running'));
                    let winner = i;
                    let userChoice = document.getElementById('horse-sel').value;
                    if (winner == userChoice) { coins += bet * 3; alert("ğŸ† å† è»æ˜¯ " + (winner+1) + " è™Ÿï¼ä½ è´äº† " + (bet*3) + " é‡‘å¹£ï¼"); }
                    else { alert("âŒ å† è»æ˜¯ " + (winner+1) + " è™Ÿï¼å†æ¥å†å²ã€‚"); }
                    sync();
                    setTimeout(() => els.forEach(e => e.style.left = '0'), 1500);
                }
            }
        }, 50);
    }

    // --- 3. ç æ°´æœ (æ…¢é€Ÿå„ªåŒ–) ---
    const cv = document.getElementById('fruit-canvas');
    const cx = cv.getContext('2d');
    let frts = [], fa = false, fs = 0, ft = 30;

    function startFruit() {
        if (fa) return;
        fa = true; fs = 0; ft = 30;
        document.getElementById('fruit-ui').style.display = 'none';
        cv.width = cv.offsetWidth; cv.height = cv.offsetHeight;
        let tInt = setInterval(() => {
            ft--; document.getElementById('fruit-timer').innerText = `å€’æ•¸: ${ft}s`;
            if (ft <= 0) { clearInterval(tInt); fa = false; coins += fs; sync(); alert("æ¯”è³½çµæŸï¼ç²å¾— " + fs + " é‡‘å¹£"); document.getElementById('fruit-ui').style.display = 'block'; }
        }, 1000);
        reqF();
    }

    cv.addEventListener('mousemove', (e) => {
        if (!fa) return;
        const r = cv.getBoundingClientRect(), mx = e.clientX - r.left, my = e.clientY - r.top;
        frts.forEach(f => {
            if (Math.hypot(f.x - mx, f.y - my) < 50 && !f.c) {
                f.c = true; if(f.t === 'b') { fs -= 100; } else { fs += 15; }
                document.getElementById('fruit-score').innerText = `å¾—åˆ†: ${fs}`;
            }
        });
    });

    function reqF() {
        if (!fa) return;
        cx.clearRect(0,0, cv.width, cv.height);
        if (Math.random() < 0.03) { // é™ä½å‡ºç¾é »ç‡
            frts.push({ 
                x: Math.random() * cv.width, 
                y: cv.height, 
                vy: -Math.random() * 6 - 7, // é™ä½å‘ä¸Šçš„æ¨åŠ› (è®Šæ…¢)
                vx: (Math.random()-0.5) * 3, 
                t: Math.random() < 0.15 ? 'b' : 'f', 
                c: false 
            });
        }
        frts.forEach((f, i) => {
            f.x += f.vx; f.y += f.vy; 
            f.vy += 0.12; // é™ä½é‡åŠ›æ„Ÿ (æ‰è½è®Šæ…¢)
            cx.font = '50px Arial';
            if (!f.c) {
                cx.fillText(f.t === 'b' ? 'ğŸ’£' : 'ğŸ', f.x, f.y);
            } else if (f.t === 'f') {
                cx.fillStyle = "yellow"; cx.fillText('âœ¨', f.x, f.y);
            }
            if (f.y > cv.height + 60) frts.splice(i, 1);
        });
        requestAnimationFrame(reqF);
    }

    // --- 4. æ“²éª°å­æ¯”å¤§å° (çµ•å°å…¬å¹³) ---
    function playDice() {
        const bet = parseInt(document.getElementById('dice-bet').value);
        if (coins < bet) return alert("é‡‘å¹£ä¸è¶³ï¼");
        const uE = document.getElementById('user-dice'), cE = document.getElementById('cpu-dice'), mE = document.getElementById('dice-result-msg');
        
        mE.innerText = "æ“²éª°ä¸­..."; uE.innerText = "ğŸ²"; cE.innerText = "ğŸ²";
        
        setTimeout(() => {
            // ä½¿ç”¨ Math.random() ä¿è­‰å®Œå…¨å…¬å¹³
            const uV = Math.floor(Math.random() * 6) + 1;
            const cV = Math.floor(Math.random() * 6) + 1;
            uE.innerText = uV; cE.innerText = cV;
            
            if (uV > cV) {
                coins += bet; mE.style.color = "var(--success)"; mE.innerText = "YOU WIN! +"+bet;
            } else if (uV < cV) {
                coins -= bet; mE.style.color = "var(--danger)"; mE.innerText = "YOU LOSE! -"+bet;
            } else {
                mE.style.color = "var(--accent)"; mE.innerText = "DRAW! å¹³æ‰‹é€€å›";
            }
            sync();
        }, 800);
    }
</script>
</body>
</html>
